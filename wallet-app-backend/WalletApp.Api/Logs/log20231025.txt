2023-10-25 13:22:04.746 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 13:22:04.770 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 13:22:04.772 +02:00 [INF] Hosting environment: Development
2023-10-25 13:22:04.772 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 13:22:07.860 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 13:22:07.885 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 13:22:07.992 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 0 - - 133.5362ms
2023-10-25 14:48:20.019 +02:00 [INF] Application is shutting down...
2023-10-25 15:44:30.541 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 15:44:30.571 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 15:44:30.572 +02:00 [INF] Hosting environment: Development
2023-10-25 15:44:30.573 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 15:44:31.530 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 15:44:31.607 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 15:44:31.662 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:44:31.868 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 340.9630ms
2023-10-25 15:44:31.868 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 204.0624ms
2023-10-25 15:44:42.420 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:44:42.425 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 4.6552ms
2023-10-25 15:45:01.436 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:45:01.437 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 1.0620ms
2023-10-25 15:45:37.809 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/account/register application/json 150
2023-10-25 15:45:37.817 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.AccountController.Register (WalletApp.Api)'
2023-10-25 15:45:37.837 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(WalletApp.Application.Account.Register.RegisterCommand, System.Threading.CancellationToken) on controller WalletApp.Controllers.AccountController (WalletApp.Api).
2023-10-25 15:45:56.053 +02:00 [ERR] An error occurred using the connection to database 'WalletApp' on server 'localhost,1433'.
2023-10-25 15:45:56.067 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WalletApp.Persistence.WalletDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.)
 ---> System.ComponentModel.Win32Exception (10061): Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:10061,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.)
 ---> System.ComponentModel.Win32Exception (10061): Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:10061,State:0,Class:20
2023-10-25 15:45:56.251 +02:00 [INF] Executed action WalletApp.Controllers.AccountController.Register (WalletApp.Api) in 18410.1284ms
2023-10-25 15:45:56.255 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.AccountController.Register (WalletApp.Api)'
2023-10-25 15:45:56.392 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/account/register application/json 150 - 500 - application/json 18584.9418ms
2023-10-25 15:46:46.449 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/account/register application/json 150
2023-10-25 15:46:46.450 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.AccountController.Register (WalletApp.Api)'
2023-10-25 15:46:46.451 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(WalletApp.Application.Account.Register.RegisterCommand, System.Threading.CancellationToken) on controller WalletApp.Controllers.AccountController (WalletApp.Api).
2023-10-25 15:47:03.446 +02:00 [ERR] An error occurred using the connection to database 'WalletApp' on server 'localhost,1433'.
2023-10-25 15:47:03.449 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WalletApp.Persistence.WalletDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.)
 ---> System.ComponentModel.Win32Exception (10061): Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:10061,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.)
 ---> System.ComponentModel.Win32Exception (10061): Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:10061,State:0,Class:20
2023-10-25 15:47:03.566 +02:00 [INF] Executed action WalletApp.Controllers.AccountController.Register (WalletApp.Api) in 17112.601ms
2023-10-25 15:47:03.567 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.AccountController.Register (WalletApp.Api)'
2023-10-25 15:47:03.669 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/account/register application/json 150 - 500 - application/json 17220.4908ms
2023-10-25 15:47:34.792 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/account/register application/json 150
2023-10-25 15:47:34.797 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.AccountController.Register (WalletApp.Api)'
2023-10-25 15:47:34.798 +02:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(WalletApp.Application.Account.Register.RegisterCommand, System.Threading.CancellationToken) on controller WalletApp.Controllers.AccountController (WalletApp.Api).
2023-10-25 15:47:34.937 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Email] = @__email_0
2023-10-25 15:47:35.077 +02:00 [INF] Executed action WalletApp.Controllers.AccountController.Register (WalletApp.Api) in 278.5129ms
2023-10-25 15:47:35.079 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.AccountController.Register (WalletApp.Api)'
2023-10-25 15:47:35.177 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/account/register application/json 150 - 500 - application/json 386.0516ms
2023-10-25 15:47:57.791 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/account/authenticate application/json 67
2023-10-25 15:47:57.795 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.AccountController.Authentication (WalletApp.Api)'
2023-10-25 15:47:57.799 +02:00 [INF] Route matched with {action = "Authentication", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Account.Authenticate.AuthenticateDto]] Authentication(WalletApp.Application.Account.Authenticate.AuthenticateCommand, System.Threading.CancellationToken) on controller WalletApp.Controllers.AccountController (WalletApp.Api).
2023-10-25 15:47:57.847 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Email] = @__email_0
2023-10-25 15:47:58.157 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Tokens] AS [t]
WHERE [t].[AccountId] = @__id_0
2023-10-25 15:47:58.307 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p11='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 255) (DbType = AnsiString), @p10='?' (Size = 40) (DbType = AnsiString), @p16='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [CratedBy] = @p0, [CreatedTime] = @p1, [DeletedBy] = @p2, [DeletedTime] = @p3, [Email] = @p4, [Icon] = @p5, [IsDeleted] = @p6, [ModifiedBy] = @p7, [ModifiedTime] = @p8, [PasswordHash] = @p9, [Username] = @p10
OUTPUT 1
WHERE [Id] = @p11;
UPDATE [Tokens] SET [AccountId] = @p12, [JWTToken] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15
OUTPUT 1
WHERE [Id] = @p16;
2023-10-25 15:48:01.253 +02:00 [INF] Executing ObjectResult, writing value of type 'WalletApp.Domain.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-25 15:48:01.263 +02:00 [INF] Executed action WalletApp.Controllers.AccountController.Authentication (WalletApp.Api) in 3462.4188ms
2023-10-25 15:48:01.265 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.AccountController.Authentication (WalletApp.Api)'
2023-10-25 15:48:01.267 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/account/authenticate application/json 67 - 200 - application/json;+charset=utf-8 3475.6047ms
2023-10-25 15:48:33.798 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:48:33.802 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 4.3566ms
2023-10-25 15:48:47.990 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:48:47.991 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 1.1252ms
2023-10-25 15:48:49.508 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:48:49.509 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 1.1862ms
2023-10-25 15:49:04.780 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:49:04.782 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 1.4459ms
2023-10-25 15:49:06.714 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:49:06.717 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 2.0138ms
2023-10-25 15:49:07.344 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:49:07.345 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 0.9945ms
2023-10-25 15:49:08.047 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:49:08.048 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 1.0297ms
2023-10-25 15:49:38.737 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:49:38.741 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 5.8292ms
2023-10-25 15:54:50.225 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 15:54:50.229 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 404 0 - 4.8953ms
2023-10-25 16:14:44.404 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 16:14:44.431 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 16:14:44.433 +02:00 [INF] Hosting environment: Development
2023-10-25 16:14:44.434 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 16:14:44.663 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 16:14:44.698 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 16:14:44.856 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 196.1705ms
2023-10-25 16:17:50.519 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 16:17:50.548 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 16:17:50.550 +02:00 [INF] Hosting environment: Development
2023-10-25 16:17:50.551 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 16:17:51.000 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 16:17:51.028 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 16:17:51.189 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 191.2842ms
2023-10-25 16:18:27.438 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 16:18:27.452 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 16:18:27.468 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 16:18:28.551 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 16:18:28.687 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 1214.1898ms
2023-10-25 16:18:28.689 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 16:18:28.812 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 500 - application/json 1374.6480ms
2023-10-25 16:19:11.795 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 16:19:11.797 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 16:19:11.799 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 16:19:11.821 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 16:19:11.876 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 76.0579ms
2023-10-25 16:19:11.877 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 16:19:11.957 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 500 - application/json 162.1684ms
2023-10-25 17:00:18.458 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 17:00:18.486 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 17:00:18.487 +02:00 [INF] Hosting environment: Development
2023-10-25 17:00:18.488 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 17:00:18.602 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 17:00:18.629 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 17:00:18.782 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 181.8874ms
2023-10-25 17:00:24.160 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:00:24.176 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:00:24.192 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:04:51.816 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 17:04:51.843 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 17:04:51.845 +02:00 [INF] Hosting environment: Development
2023-10-25 17:04:51.847 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 17:04:52.372 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 17:04:52.397 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 17:04:52.556 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 185.2097ms
2023-10-25 17:05:05.513 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:05:05.525 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:05:05.541 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:06:48.943 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 17:06:48.970 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 17:06:48.972 +02:00 [INF] Hosting environment: Development
2023-10-25 17:06:48.972 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 17:06:49.190 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 17:06:49.220 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 17:06:49.377 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 189.2376ms
2023-10-25 17:10:22.411 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:10:22.425 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:10:22.444 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:10:30.133 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 17:10:30.244 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 7795.6362ms
2023-10-25 17:10:30.247 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:10:30.364 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 500 - application/json 7952.5681ms
2023-10-25 17:11:57.936 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/account/authenticate application/json 67
2023-10-25 17:11:57.942 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.AccountController.Authentication (WalletApp.Api)'
2023-10-25 17:11:57.946 +02:00 [INF] Route matched with {action = "Authentication", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Account.Authenticate.AuthenticateDto]] Authentication(WalletApp.Application.Account.Authenticate.AuthenticateCommand, System.Threading.CancellationToken) on controller WalletApp.Controllers.AccountController (WalletApp.Api).
2023-10-25 17:11:58.018 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Email] = @__email_0
2023-10-25 17:11:58.347 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Tokens] AS [t]
WHERE [t].[AccountId] = @__id_0
2023-10-25 17:11:58.470 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p11='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 255) (DbType = AnsiString), @p10='?' (Size = 40) (DbType = AnsiString), @p16='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [CratedBy] = @p0, [CreatedTime] = @p1, [DeletedBy] = @p2, [DeletedTime] = @p3, [Email] = @p4, [Icon] = @p5, [IsDeleted] = @p6, [ModifiedBy] = @p7, [ModifiedTime] = @p8, [PasswordHash] = @p9, [Username] = @p10
OUTPUT 1
WHERE [Id] = @p11;
UPDATE [Tokens] SET [AccountId] = @p12, [JWTToken] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15
OUTPUT 1
WHERE [Id] = @p16;
2023-10-25 17:12:00.733 +02:00 [INF] Executing ObjectResult, writing value of type 'WalletApp.Domain.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-25 17:12:00.742 +02:00 [INF] Executed action WalletApp.Controllers.AccountController.Authentication (WalletApp.Api) in 2794.6925ms
2023-10-25 17:12:00.743 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.AccountController.Authentication (WalletApp.Api)'
2023-10-25 17:12:00.744 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/account/authenticate application/json 67 - 200 - application/json;+charset=utf-8 2808.6104ms
2023-10-25 17:12:30.143 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:12:30.146 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:12:30.147 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:12:39.238 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 17:12:39.296 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 9147.9757ms
2023-10-25 17:12:39.298 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:12:39.377 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 500 - application/json 9236.6757ms
2023-10-25 17:12:46.918 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:12:46.919 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:12:46.920 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:12:49.176 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 17:12:49.211 +02:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tokens] ([Id], [AccountId], [JWTToken], [RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-10-25 17:12:49.226 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WalletApp.Persistence.WalletDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AccountId', table 'WalletApp.dbo.Tokens'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:548b78de-e70a-4bc2-aecd-4324a5edb6da
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AccountId', table 'WalletApp.dbo.Tokens'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:548b78de-e70a-4bc2-aecd-4324a5edb6da
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-25 17:12:49.351 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 2429.7175ms
2023-10-25 17:12:49.353 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:12:49.456 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 500 - application/json 2538.5010ms
2023-10-25 17:13:32.213 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:13:32.219 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:13:32.221 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:13:34.119 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 17:13:45.436 +02:00 [ERR] Failed executing DbCommand (70ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tokens] ([Id], [AccountId], [JWTToken], [RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-10-25 17:13:45.440 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WalletApp.Persistence.WalletDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AccountId', table 'WalletApp.dbo.Tokens'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:548b78de-e70a-4bc2-aecd-4324a5edb6da
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AccountId', table 'WalletApp.dbo.Tokens'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:548b78de-e70a-4bc2-aecd-4324a5edb6da
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-25 17:20:41.341 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 17:20:41.368 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 17:20:41.369 +02:00 [INF] Hosting environment: Development
2023-10-25 17:20:41.370 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 17:20:41.395 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 17:20:41.419 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 17:20:41.563 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 169.1274ms
2023-10-25 17:21:29.197 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:21:29.218 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:21:29.237 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:21:35.489 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 17:26:32.165 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 17:26:32.193 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 17:26:32.195 +02:00 [INF] Hosting environment: Development
2023-10-25 17:26:32.195 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 17:26:32.235 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 17:26:32.261 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 17:26:32.430 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 196.4601ms
2023-10-25 17:26:37.428 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:26:37.439 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:26:37.455 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:26:40.797 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 17:27:45.569 +02:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tokens] ([Id], [AccountId], [JWTToken], [RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-10-25 17:27:45.586 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WalletApp.Persistence.WalletDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AccountId', table 'WalletApp.dbo.Tokens'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d61d3f16-4b4a-4a8b-9234-0483c278c1e4
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AccountId', table 'WalletApp.dbo.Tokens'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d61d3f16-4b4a-4a8b-9234-0483c278c1e4
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-25 17:27:45.734 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 68274.9077ms
2023-10-25 17:27:45.737 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:27:45.882 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 500 - application/json 68454.1980ms
2023-10-25 17:31:12.357 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:31:12.359 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:31:12.360 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:31:16.713 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 17:31:41.461 +02:00 [ERR] Failed executing DbCommand (34ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tokens] ([Id], [AccountId], [JWTToken], [RefreshToken], [RefreshTokenExpiryTime])
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-10-25 17:31:41.465 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WalletApp.Persistence.WalletDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AccountId', table 'WalletApp.dbo.Tokens'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d61d3f16-4b4a-4a8b-9234-0483c278c1e4
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'AccountId', table 'WalletApp.dbo.Tokens'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d61d3f16-4b4a-4a8b-9234-0483c278c1e4
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-10-25 17:31:45.641 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 33279.2355ms
2023-10-25 17:31:45.643 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:31:45.748 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 500 - application/json 33391.1033ms
2023-10-25 17:38:47.254 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 17:38:47.281 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 17:38:47.283 +02:00 [INF] Hosting environment: Development
2023-10-25 17:38:47.284 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 17:38:47.483 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 17:38:47.507 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 17:38:47.659 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 178.6450ms
2023-10-25 17:38:59.800 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0
2023-10-25 17:38:59.815 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:38:59.831 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 17:39:05.991 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 17:39:06.105 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Tokens] AS [t]
WHERE [t].[AccountId] = @__id_0
2023-10-25 17:39:06.203 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Tokens] SET [AccountId] = @p0, [JWTToken] = @p1, [RefreshToken] = @p2, [RefreshTokenExpiryTime] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2023-10-25 17:39:06.332 +02:00 [INF] Executing ObjectResult, writing value of type 'WalletApp.Domain.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-25 17:39:06.359 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 6522.4443ms
2023-10-25 17:39:06.361 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 17:39:06.368 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/token/updateToken - 0 - 200 - application/json;+charset=utf-8 6567.7472ms
2023-10-25 19:18:22.705 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 19:18:22.735 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 19:18:22.737 +02:00 [INF] Hosting environment: Development
2023-10-25 19:18:22.738 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 19:18:23.478 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 19:18:23.516 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 19:18:23.735 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 259.8718ms
2023-10-25 19:19:51.225 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/token - 0
2023-10-25 19:19:51.239 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 19:19:51.257 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:20:13.496 +02:00 [ERR] An error occurred using the connection to database 'WalletApp' on server 'localhost,1433'.
2023-10-25 19:20:13.512 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WalletApp.Persistence.WalletDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.)
 ---> System.ComponentModel.Win32Exception (10061): Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:10061,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.)
 ---> System.ComponentModel.Win32Exception (10061): Nie można nawiązać połączenia, ponieważ komputer docelowy aktywnie go odmawia.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:10061,State:0,Class:20
2023-10-25 19:20:13.644 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 22382.8036ms
2023-10-25 19:20:13.651 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 19:20:13.793 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/token - 0 - 500 - application/json 22567.6093ms
2023-10-25 19:22:54.247 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/token - 0
2023-10-25 19:22:54.249 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 19:22:54.250 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:22:54.529 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username], [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Accounts] AS [a]
LEFT JOIN [Tokens] AS [t] ON [a].[Id] = [t].[AccountId]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-10-25 19:22:54.609 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 357.1976ms
2023-10-25 19:22:54.610 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 19:22:54.697 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/token - 0 - 500 - application/json 450.0980ms
2023-10-25 19:33:56.280 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 19:33:56.307 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 19:33:56.309 +02:00 [INF] Hosting environment: Development
2023-10-25 19:33:56.310 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 19:33:56.345 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 19:33:56.377 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 19:33:56.528 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 183.9276ms
2023-10-25 19:35:21.085 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/account/authenticate application/json 67
2023-10-25 19:35:21.103 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.AccountController.Authentication (WalletApp.Api)'
2023-10-25 19:35:21.121 +02:00 [INF] Route matched with {action = "Authentication", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Account.Authenticate.AuthenticateDto]] Authentication(WalletApp.Application.Account.Authenticate.AuthenticateCommand, System.Threading.CancellationToken) on controller WalletApp.Controllers.AccountController (WalletApp.Api).
2023-10-25 19:35:22.341 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Email] = @__email_0
2023-10-25 19:35:22.728 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Tokens] AS [t]
WHERE [t].[AccountId] = @__id_0
2023-10-25 19:35:22.871 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p11='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 255) (DbType = AnsiString), @p10='?' (Size = 40) (DbType = AnsiString), @p16='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [CratedBy] = @p0, [CreatedTime] = @p1, [DeletedBy] = @p2, [DeletedTime] = @p3, [Email] = @p4, [Icon] = @p5, [IsDeleted] = @p6, [ModifiedBy] = @p7, [ModifiedTime] = @p8, [PasswordHash] = @p9, [Username] = @p10
OUTPUT 1
WHERE [Id] = @p11;
UPDATE [Tokens] SET [AccountId] = @p12, [JWTToken] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15
OUTPUT 1
WHERE [Id] = @p16;
2023-10-25 19:35:26.111 +02:00 [INF] Executing ObjectResult, writing value of type 'WalletApp.Domain.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-25 19:35:26.128 +02:00 [INF] Executed action WalletApp.Controllers.AccountController.Authentication (WalletApp.Api) in 5002.2547ms
2023-10-25 19:35:26.131 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.AccountController.Authentication (WalletApp.Api)'
2023-10-25 19:35:26.139 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/account/authenticate application/json 67 - 200 - application/json;+charset=utf-8 5053.3986ms
2023-10-25 19:40:36.900 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 19:40:36.928 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 19:40:36.930 +02:00 [INF] Hosting environment: Development
2023-10-25 19:40:36.930 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 19:40:36.971 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 19:40:36.994 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 19:40:37.138 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 167.8721ms
2023-10-25 19:41:35.165 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5238/api/token - 0
2023-10-25 19:41:36.195 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 19:41:36.216 +02:00 [INF] Route matched with {action = "UpdateToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:41:36.336 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WalletApp.Persistence.WalletDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2023-10-25 19:41:36.476 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api) in 250.0967ms
2023-10-25 19:41:36.479 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.UpdateToken (WalletApp.Api)'
2023-10-25 19:41:36.536 +02:00 [INF] Executed DbCommand (197ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__id_0
2023-10-25 19:41:36.564 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5238/api/token - 0 - 500 - application/json 1399.2706ms
2023-10-25 19:41:36.578 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WalletApp.Persistence.WalletDbContext'.
System.InvalidOperationException: Invalid attempt to call CheckDataIsReady when reader is closed.
   at Microsoft.Data.SqlClient.SqlDataReader.CheckDataIsReady(Int32 columnIndex, Boolean allowPartiallyReadColumn, Boolean permitAsync, String methodName)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadColumn(Int32 i, Boolean setTimeout, Boolean allowPartiallyReadColumn, Boolean forStreaming)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadColumn(Int32 i, Boolean setTimeout, Boolean allowPartiallyReadColumn)
   at Microsoft.Data.SqlClient.SqlDataReader.GetGuid(Int32 i)
   at lambda_method4(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Invalid attempt to call CheckDataIsReady when reader is closed.
   at Microsoft.Data.SqlClient.SqlDataReader.CheckDataIsReady(Int32 columnIndex, Boolean allowPartiallyReadColumn, Boolean permitAsync, String methodName)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadColumn(Int32 i, Boolean setTimeout, Boolean allowPartiallyReadColumn, Boolean forStreaming)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadColumn(Int32 i, Boolean setTimeout, Boolean allowPartiallyReadColumn)
   at Microsoft.Data.SqlClient.SqlDataReader.GetGuid(Int32 i)
   at lambda_method4(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2023-10-25 19:42:12.635 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/token - -
2023-10-25 19:42:12.656 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:42:12.658 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__id_0
2023-10-25 19:42:12.660 +02:00 [INF] Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:45:12.875 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 19:45:12.905 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 19:45:12.907 +02:00 [INF] Hosting environment: Development
2023-10-25 19:45:12.909 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 19:45:13.060 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 19:45:13.097 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 19:45:13.250 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 192.1760ms
2023-10-25 19:46:34.458 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/token - -
2023-10-25 19:46:35.498 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:46:35.519 +02:00 [INF] Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:49:13.401 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 19:49:13.428 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 19:49:13.430 +02:00 [INF] Hosting environment: Development
2023-10-25 19:49:13.431 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 19:49:13.894 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 19:49:13.920 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 19:49:14.074 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 182.3072ms
2023-10-25 19:49:25.686 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/token - -
2023-10-25 19:49:26.842 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__id_0
2023-10-25 19:49:26.925 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:49:26.938 +02:00 [INF] Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:50:52.040 +02:00 [ERR] Failed executing DbCommand (78,701ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Tokens] AS [t]
WHERE [t].[Id] = @__id_0
2023-10-25 19:50:52.053 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WalletApp.Persistence.WalletDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): Upłynął limit czasu operacji oczekiwania.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:fbfb9c0c-6fb9-4c7c-b1a3-b06c759b8f4d
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): Upłynął limit czasu operacji oczekiwania.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:fbfb9c0c-6fb9-4c7c-b1a3-b06c759b8f4d
Error Number:-2,State:0,Class:11
2023-10-25 19:50:54.658 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-10-25 19:50:54.662 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api) in 87719.7709ms
2023-10-25 19:50:54.664 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:50:54.670 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5238/api/token - - - 200 0 - 88983.9090ms
2023-10-25 19:52:16.241 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/token - -
2023-10-25 19:52:16.270 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:52:16.272 +02:00 [INF] Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:52:20.884 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api) in 4610.2715ms
2023-10-25 19:52:20.885 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:52:20.930 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5238/api/token - - - 500 - application/json 4689.1365ms
2023-10-25 19:55:29.047 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/token - -
2023-10-25 19:55:29.065 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:55:29.066 +02:00 [INF] Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:55:41.608 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api) in 12540.588ms
2023-10-25 19:55:41.610 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:55:41.635 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5238/api/token - - - 500 - application/json 12588.6732ms
2023-10-25 19:55:47.011 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/account/authenticate application/json 67
2023-10-25 19:55:47.013 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.AccountController.Authentication (WalletApp.Api)'
2023-10-25 19:55:47.016 +02:00 [INF] Route matched with {action = "Authentication", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Account.Authenticate.AuthenticateDto]] Authentication(WalletApp.Application.Account.Authenticate.AuthenticateCommand, System.Threading.CancellationToken) on controller WalletApp.Controllers.AccountController (WalletApp.Api).
2023-10-25 19:55:47.117 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Email] = @__email_0
2023-10-25 19:55:47.295 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Tokens] AS [t]
WHERE [t].[AccountId] = @__id_0
2023-10-25 19:55:47.394 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p11='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 255) (DbType = AnsiString), @p10='?' (Size = 40) (DbType = AnsiString), @p16='?' (DbType = Guid), @p12='?' (DbType = Guid), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [CratedBy] = @p0, [CreatedTime] = @p1, [DeletedBy] = @p2, [DeletedTime] = @p3, [Email] = @p4, [Icon] = @p5, [IsDeleted] = @p6, [ModifiedBy] = @p7, [ModifiedTime] = @p8, [PasswordHash] = @p9, [Username] = @p10
OUTPUT 1
WHERE [Id] = @p11;
UPDATE [Tokens] SET [AccountId] = @p12, [JWTToken] = @p13, [RefreshToken] = @p14, [RefreshTokenExpiryTime] = @p15
OUTPUT 1
WHERE [Id] = @p16;
2023-10-25 19:55:49.201 +02:00 [INF] Executing ObjectResult, writing value of type 'WalletApp.Domain.Common.ApiResponse`1[[System.Object, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-25 19:55:49.209 +02:00 [INF] Executed action WalletApp.Controllers.AccountController.Authentication (WalletApp.Api) in 2191.1393ms
2023-10-25 19:55:49.211 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.AccountController.Authentication (WalletApp.Api)'
2023-10-25 19:55:49.212 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/account/authenticate application/json 67 - 200 - application/json;+charset=utf-8 2201.4331ms
2023-10-25 19:56:00.316 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/token - -
2023-10-25 19:56:00.338 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__id_0
2023-10-25 19:56:00.340 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:56:00.341 +02:00 [INF] Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:56:04.460 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-10-25 19:56:04.461 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Tokens] AS [t]
WHERE [t].[Id] = @__id_0
2023-10-25 19:56:04.461 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api) in 4118.4279ms
2023-10-25 19:56:04.479 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:56:04.480 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5238/api/token - - - 200 0 - 4163.6445ms
2023-10-25 19:57:02.515 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/token - -
2023-10-25 19:57:02.523 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__id_0
2023-10-25 19:57:02.525 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:57:02.526 +02:00 [INF] Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 19:57:08.389 +02:00 [INF] Executed DbCommand (120ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Tokens] AS [t]
WHERE [t].[Id] = @__id_0
2023-10-25 19:57:08.419 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-10-25 19:57:41.752 +02:00 [INF] Now listening on: http://localhost:5238
2023-10-25 19:57:41.779 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-25 19:57:41.781 +02:00 [INF] Hosting environment: Development
2023-10-25 19:57:41.782 +02:00 [INF] Content root path: C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api
2023-10-25 19:57:42.294 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/swagger - -
2023-10-25 19:57:42.321 +02:00 [WRN] Failed to determine the https port for redirect.
2023-10-25 19:57:42.502 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/swagger - - - 404 0 - 209.9046ms
2023-10-25 19:57:53.534 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5238/api/token - -
2023-10-25 19:57:54.691 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[Email], [a].[Icon], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[PasswordHash], [a].[Username]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__id_0
2023-10-25 19:57:54.768 +02:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 19:57:54.782 +02:00 [INF] Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-10-25 20:01:37.950 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[AccountId], [t].[JWTToken], [t].[RefreshToken], [t].[RefreshTokenExpiryTime]
FROM [Tokens] AS [t]
WHERE [t].[AccountId] = @__id_0
2023-10-25 20:01:37.982 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2023-10-25 20:01:37.987 +02:00 [INF] Executed action WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api) in 223199.8615ms
2023-10-25 20:01:37.990 +02:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.RevokeToken (WalletApp.Api)'
2023-10-25 20:01:37.999 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5238/api/token - - - 200 0 - 224465.0668ms

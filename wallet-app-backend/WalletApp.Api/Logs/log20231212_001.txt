2023-12-12 21:59:31.718 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/user/actualMoney - -
2023-12-12 21:59:31.718 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/transaction?type=0&pageSize=2&pageNumber=1 - -
2023-12-12 21:59:31.719 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/transaction/moneyChart?type=0 - -
2023-12-12 21:59:31.719 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/transaction/incomeChart?type=0 - -
2023-12-12 21:59:31.722 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/transaction/costChart?type=0 - -
2023-12-12 21:59:31.724 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.724 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.724 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.724 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.724 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.725 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/user/actualMoney - - - 204 - - 6.9026ms
2023-12-12 21:59:31.726 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/transaction?type=0&pageSize=2&pageNumber=1 - - - 204 - - 7.2229ms
2023-12-12 21:59:31.726 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/transaction/moneyChart?type=0 - - - 204 - - 7.6736ms
2023-12-12 21:59:31.727 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/transaction/incomeChart?type=0 - - - 204 - - 7.5501ms
2023-12-12 21:59:31.728 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/transaction/costChart?type=0 - - - 204 - - 6.0891ms
2023-12-12 21:59:31.728 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/user/actualMoney - -
2023-12-12 21:59:31.729 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/transaction?type=0&pageSize=2&pageNumber=1 - -
2023-12-12 21:59:31.730 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/transaction/moneyChart?type=0 - -
2023-12-12 21:59:31.730 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/transaction/incomeChart?type=0 - -
2023-12-12 21:59:31.731 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/transaction/costChart?type=0 - -
2023-12-12 21:59:31.731 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.732 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.733 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.734 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.735 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:31.736 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/user/actualMoney - - - 404 0 - 7.6348ms
2023-12-12 21:59:31.737 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/transaction?type=0&pageSize=2&pageNumber=1 - - - 404 0 - 7.6487ms
2023-12-12 21:59:31.738 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/transaction/moneyChart?type=0 - - - 404 0 - 7.7331ms
2023-12-12 21:59:31.738 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/transaction/incomeChart?type=0 - - - 404 0 - 7.9223ms
2023-12-12 21:59:31.739 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/transaction/costChart?type=0 - - - 404 0 - 7.8941ms
2023-12-12 21:59:33.424 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/defaultUserTransactions/userDefaultTransactions - -
2023-12-12 21:59:33.425 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:33.427 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/defaultUserTransactions/userDefaultTransactions - - - 204 - - 2.7475ms
2023-12-12 21:59:33.428 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/defaultUserTransactions/userDefaultTransactions - -
2023-12-12 21:59:33.429 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:33.430 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/defaultUserTransactions/userDefaultTransactions - - - 404 0 - 1.8483ms
2023-12-12 21:59:34.948 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/currency - -
2023-12-12 21:59:34.948 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/category/userCategories - -
2023-12-12 21:59:34.949 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:34.950 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:34.951 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/currency - - - 204 - - 2.7560ms
2023-12-12 21:59:34.952 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/category/userCategories - - - 204 - - 3.4343ms
2023-12-12 21:59:34.952 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/currency - -
2023-12-12 21:59:34.953 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/category/userCategories - -
2023-12-12 21:59:34.955 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:34.955 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:34.956 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api)'
2023-12-12 21:59:34.957 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api)'
2023-12-12 21:59:34.957 +01:00 [INF] Route matched with {action = "GetCurrencies", controller = "Currency"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult`1[System.Collections.Generic.IEnumerable`1[WalletApp.Application.Common.Currency.GetCurrencies.GetCurrenciesQueryResponseDto]]]] GetCurrencies(System.Threading.CancellationToken) on controller WalletApp.Controllers.CurrencyController (WalletApp.Api).
2023-12-12 21:59:34.958 +01:00 [INF] Route matched with {action = "GetUserCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult`1[System.Collections.Generic.IEnumerable`1[WalletApp.Application.Common.Category.GetUserCategories.GetUserCategoriesResponseDto]]]] GetUserCategories(System.Threading.CancellationToken) on controller WalletApp.Controllers.CategoryController (WalletApp.Api).
2023-12-12 21:59:34.963 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Ask], [c].[Bid], [c].[Code], [c].[CratedBy], [c].[CreatedTime], [c].[CurrencyName], [c].[DeletedBy], [c].[DeletedTime], [c].[IsDeleted], [c].[ModifiedBy], [c].[ModifiedTime], [c].[TradingDate]
FROM [Currencies] AS [c]
2023-12-12 21:59:34.969 +01:00 [INF] Executing OkObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult`1[[System.Collections.Generic.IEnumerable`1[[WalletApp.Application.Common.Currency.GetCurrencies.GetCurrenciesQueryResponseDto, WalletApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-12-12 21:59:34.971 +01:00 [INF] Executed action WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api) in 11.0546ms
2023-12-12 21:59:34.972 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api)'
2023-12-12 21:59:34.973 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/currency - - - 200 - application/json;+charset=utf-8 21.2394ms
2023-12-12 21:59:34.990 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CratedBy], [c].[CreatedTime], [c].[DeletedBy], [c].[DeletedTime], [c].[GroupId], [c].[IsDeleted], [c].[ModifiedBy], [c].[ModifiedTime], [c].[Name], [c].[UserIdentityId]
FROM [Categories] AS [c]
WHERE [c].[UserIdentityId] = @__id_0 AND [c].[IsDeleted] = CAST(0 AS bit)
2023-12-12 21:59:34.992 +01:00 [INF] Executing OkObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult`1[[System.Collections.Generic.IEnumerable`1[[WalletApp.Application.Common.Category.GetUserCategories.GetUserCategoriesResponseDto, WalletApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-12-12 21:59:34.993 +01:00 [INF] Executed action WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api) in 31.8949ms
2023-12-12 21:59:34.994 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api)'
2023-12-12 21:59:34.995 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/category/userCategories - - - 200 - application/json;+charset=utf-8 42.5667ms
2023-12-12 21:59:46.384 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/transactionUser/add - -
2023-12-12 21:59:46.385 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:46.386 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/transactionUser/add - - - 204 - - 1.8461ms
2023-12-12 21:59:46.387 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/transactionUser/add application/json 222
2023-12-12 21:59:46.388 +01:00 [INF] CORS policy execution successful.
2023-12-12 21:59:46.389 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api)'
2023-12-12 21:59:46.390 +01:00 [INF] Route matched with {action = "AddUserTransaction", controller = "TransactionUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult]] AddUserTransaction(WalletApp.Application.Common.Transaction.AddUserTransaction.AddUserTransactionCommandDto, System.Threading.CancellationToken) on controller WalletApp.Controllers.TransactionUserController (WalletApp.Api).
2023-12-12 21:59:50.506 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult'.
2023-12-12 21:59:50.507 +01:00 [INF] Executed action WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api) in 4116.4074ms
2023-12-12 21:59:50.509 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api)'
2023-12-12 21:59:50.510 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/transactionUser/add application/json 222 - 400 - application/json;+charset=utf-8 4123.4089ms
2023-12-12 22:00:21.398 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/category/userCategories - -
2023-12-12 22:00:21.398 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/currency - -
2023-12-12 22:00:21.406 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:21.407 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:21.408 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/category/userCategories - - - 204 - - 9.3099ms
2023-12-12 22:00:21.413 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/currency - - - 204 - - 11.0557ms
2023-12-12 22:00:21.417 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/category/userCategories - -
2023-12-12 22:00:21.417 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/currency - -
2023-12-12 22:00:21.428 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:21.429 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:21.431 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api)'
2023-12-12 22:00:21.432 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api)'
2023-12-12 22:00:21.433 +01:00 [INF] Route matched with {action = "GetUserCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult`1[System.Collections.Generic.IEnumerable`1[WalletApp.Application.Common.Category.GetUserCategories.GetUserCategoriesResponseDto]]]] GetUserCategories(System.Threading.CancellationToken) on controller WalletApp.Controllers.CategoryController (WalletApp.Api).
2023-12-12 22:00:21.434 +01:00 [INF] Route matched with {action = "GetCurrencies", controller = "Currency"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult`1[System.Collections.Generic.IEnumerable`1[WalletApp.Application.Common.Currency.GetCurrencies.GetCurrenciesQueryResponseDto]]]] GetCurrencies(System.Threading.CancellationToken) on controller WalletApp.Controllers.CurrencyController (WalletApp.Api).
2023-12-12 22:00:21.451 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Ask], [c].[Bid], [c].[Code], [c].[CratedBy], [c].[CreatedTime], [c].[CurrencyName], [c].[DeletedBy], [c].[DeletedTime], [c].[IsDeleted], [c].[ModifiedBy], [c].[ModifiedTime], [c].[TradingDate]
FROM [Currencies] AS [c]
2023-12-12 22:00:21.454 +01:00 [INF] Executing OkObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult`1[[System.Collections.Generic.IEnumerable`1[[WalletApp.Application.Common.Currency.GetCurrencies.GetCurrenciesQueryResponseDto, WalletApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-12-12 22:00:21.455 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CratedBy], [c].[CreatedTime], [c].[DeletedBy], [c].[DeletedTime], [c].[GroupId], [c].[IsDeleted], [c].[ModifiedBy], [c].[ModifiedTime], [c].[Name], [c].[UserIdentityId]
FROM [Categories] AS [c]
WHERE [c].[UserIdentityId] = @__id_0 AND [c].[IsDeleted] = CAST(0 AS bit)
2023-12-12 22:00:21.456 +01:00 [INF] Executed action WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api) in 18.9229ms
2023-12-12 22:00:21.459 +01:00 [INF] Executing OkObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult`1[[System.Collections.Generic.IEnumerable`1[[WalletApp.Application.Common.Category.GetUserCategories.GetUserCategoriesResponseDto, WalletApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-12-12 22:00:21.460 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api)'
2023-12-12 22:00:21.461 +01:00 [INF] Executed action WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api) in 25.2755ms
2023-12-12 22:00:21.462 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/currency - - - 200 - application/json;+charset=utf-8 44.8693ms
2023-12-12 22:00:21.464 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api)'
2023-12-12 22:00:21.466 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/category/userCategories - - - 200 - application/json;+charset=utf-8 49.5877ms
2023-12-12 22:00:26.438 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/transactionUser/add - -
2023-12-12 22:00:26.439 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:26.441 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/transactionUser/add - - - 204 - - 2.5702ms
2023-12-12 22:00:26.442 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/transactionUser/add application/json 222
2023-12-12 22:00:26.443 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:26.445 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api)'
2023-12-12 22:00:26.447 +01:00 [INF] Route matched with {action = "AddUserTransaction", controller = "TransactionUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult]] AddUserTransaction(WalletApp.Application.Common.Transaction.AddUserTransaction.AddUserTransactionCommandDto, System.Threading.CancellationToken) on controller WalletApp.Controllers.TransactionUserController (WalletApp.Api).
2023-12-12 22:00:32.574 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult'.
2023-12-12 22:00:32.575 +01:00 [INF] Executed action WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api) in 6126.7969ms
2023-12-12 22:00:32.576 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api)'
2023-12-12 22:00:32.577 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/transactionUser/add application/json 222 - 400 - application/json;+charset=utf-8 6135.3702ms
2023-12-12 22:00:43.026 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/transactionUser/add - -
2023-12-12 22:00:43.028 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:43.030 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/transactionUser/add - - - 204 - - 3.6106ms
2023-12-12 22:00:43.031 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/transactionUser/add application/json 222
2023-12-12 22:00:43.032 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:43.033 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api)'
2023-12-12 22:00:43.034 +01:00 [INF] Route matched with {action = "AddUserTransaction", controller = "TransactionUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult]] AddUserTransaction(WalletApp.Application.Common.Transaction.AddUserTransaction.AddUserTransactionCommandDto, System.Threading.CancellationToken) on controller WalletApp.Controllers.TransactionUserController (WalletApp.Api).
2023-12-12 22:00:47.095 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult'.
2023-12-12 22:00:47.097 +01:00 [INF] Executed action WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api) in 4061.0627ms
2023-12-12 22:00:47.098 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api)'
2023-12-12 22:00:47.099 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/transactionUser/add application/json 222 - 400 - application/json;+charset=utf-8 4067.7070ms
2023-12-12 22:00:50.200 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/token/FIansBPD8jOfIghJ0gTmTqLcjaEaSWTCZqCPcLhMfhmYLptdfZL9Kbfto+7Qpsi0LTiA4cpP1xaF8RqW4gxFQ== - -
2023-12-12 22:00:50.201 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:50.202 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/token/FIansBPD8jOfIghJ0gTmTqLcjaEaSWTCZqCPcLhMfhmYLptdfZL9Kbfto+7Qpsi0LTiA4cpP1xaF8RqW4gxFQ== - - - 204 - - 2.0708ms
2023-12-12 22:00:50.203 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/token/FIansBPD8jOfIghJ0gTmTqLcjaEaSWTCZqCPcLhMfhmYLptdfZL9Kbfto+7Qpsi0LTiA4cpP1xaF8RqW4gxFQ== - -
2023-12-12 22:00:50.204 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:50.205 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.TokenController.GetTokens (WalletApp.Api)'
2023-12-12 22:00:50.206 +01:00 [INF] Route matched with {action = "GetTokens", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult`1[WalletApp.Application.Common.Token.UpdateRefreshToken.RefreshTokenResponseDto]]] GetTokens(System.String, System.Threading.CancellationToken) on controller WalletApp.Controllers.TokenController (WalletApp.Api).
2023-12-12 22:00:50.211 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [t].[Id], [t].[IpAddress], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[UserIdentityId]
FROM [Tokens] AS [t]
WHERE [t].[RefreshToken] = @__refreshToken_0
2023-12-12 22:00:50.215 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[IconType], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2023-12-12 22:00:50.223 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Tokens] SET [RefreshToken] = @p0, [RefreshTokenExpiryTime] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2023-12-12 22:00:50.227 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2023-12-12 22:00:50.229 +01:00 [INF] Executing OkObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult`1[[WalletApp.Application.Common.Token.UpdateRefreshToken.RefreshTokenResponseDto, WalletApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-12-12 22:00:50.231 +01:00 [INF] Executed action WalletApp.Controllers.TokenController.GetTokens (WalletApp.Api) in 23.0868ms
2023-12-12 22:00:50.232 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.TokenController.GetTokens (WalletApp.Api)'
2023-12-12 22:00:50.233 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/token/FIansBPD8jOfIghJ0gTmTqLcjaEaSWTCZqCPcLhMfhmYLptdfZL9Kbfto+7Qpsi0LTiA4cpP1xaF8RqW4gxFQ== - - - 200 - application/json;+charset=utf-8 29.6922ms
2023-12-12 22:00:50.272 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/defaultUserTransactions/userDefaultTransactions - -
2023-12-12 22:00:50.273 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:50.275 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/defaultUserTransactions/userDefaultTransactions - - - 204 - - 2.5399ms
2023-12-12 22:00:50.276 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/defaultUserTransactions/userDefaultTransactions - -
2023-12-12 22:00:50.277 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:50.278 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/defaultUserTransactions/userDefaultTransactions - - - 404 0 - 1.9604ms
2023-12-12 22:00:51.373 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/currency - -
2023-12-12 22:00:51.373 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/category/userCategories - -
2023-12-12 22:00:51.374 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:51.374 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:51.375 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/currency - - - 204 - - 2.4192ms
2023-12-12 22:00:51.376 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/category/userCategories - - - 204 - - 2.9815ms
2023-12-12 22:00:51.377 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/currency - -
2023-12-12 22:00:51.377 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/category/userCategories - -
2023-12-12 22:00:51.378 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:51.379 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:51.381 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api)'
2023-12-12 22:00:51.381 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api)'
2023-12-12 22:00:51.382 +01:00 [INF] Route matched with {action = "GetCurrencies", controller = "Currency"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult`1[System.Collections.Generic.IEnumerable`1[WalletApp.Application.Common.Currency.GetCurrencies.GetCurrenciesQueryResponseDto]]]] GetCurrencies(System.Threading.CancellationToken) on controller WalletApp.Controllers.CurrencyController (WalletApp.Api).
2023-12-12 22:00:51.383 +01:00 [INF] Route matched with {action = "GetUserCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult`1[System.Collections.Generic.IEnumerable`1[WalletApp.Application.Common.Category.GetUserCategories.GetUserCategoriesResponseDto]]]] GetUserCategories(System.Threading.CancellationToken) on controller WalletApp.Controllers.CategoryController (WalletApp.Api).
2023-12-12 22:00:51.387 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Ask], [c].[Bid], [c].[Code], [c].[CratedBy], [c].[CreatedTime], [c].[CurrencyName], [c].[DeletedBy], [c].[DeletedTime], [c].[IsDeleted], [c].[ModifiedBy], [c].[ModifiedTime], [c].[TradingDate]
FROM [Currencies] AS [c]
2023-12-12 22:00:51.390 +01:00 [INF] Executing OkObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult`1[[System.Collections.Generic.IEnumerable`1[[WalletApp.Application.Common.Currency.GetCurrencies.GetCurrenciesQueryResponseDto, WalletApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-12-12 22:00:51.390 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CratedBy], [c].[CreatedTime], [c].[DeletedBy], [c].[DeletedTime], [c].[GroupId], [c].[IsDeleted], [c].[ModifiedBy], [c].[ModifiedTime], [c].[Name], [c].[UserIdentityId]
FROM [Categories] AS [c]
WHERE [c].[UserIdentityId] = @__id_0 AND [c].[IsDeleted] = CAST(0 AS bit)
2023-12-12 22:00:51.391 +01:00 [INF] Executed action WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api) in 6.9308ms
2023-12-12 22:00:51.393 +01:00 [INF] Executing OkObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult`1[[System.Collections.Generic.IEnumerable`1[[WalletApp.Application.Common.Category.GetUserCategories.GetUserCategoriesResponseDto, WalletApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-12-12 22:00:51.394 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api)'
2023-12-12 22:00:51.395 +01:00 [INF] Executed action WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api) in 8.7937ms
2023-12-12 22:00:51.396 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/currency - - - 200 - application/json;+charset=utf-8 19.6399ms
2023-12-12 22:00:51.397 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api)'
2023-12-12 22:00:51.399 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/category/userCategories - - - 200 - application/json;+charset=utf-8 21.7402ms
2023-12-12 22:00:58.768 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/transactionUser/add - -
2023-12-12 22:00:58.770 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:58.771 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/transactionUser/add - - - 204 - - 2.2390ms
2023-12-12 22:00:58.771 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5238/api/transactionUser/add application/json 208
2023-12-12 22:00:58.772 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:00:58.773 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api)'
2023-12-12 22:00:58.774 +01:00 [INF] Route matched with {action = "AddUserTransaction", controller = "TransactionUser"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult]] AddUserTransaction(WalletApp.Application.Common.Transaction.AddUserTransaction.AddUserTransactionCommandDto, System.Threading.CancellationToken) on controller WalletApp.Controllers.TransactionUserController (WalletApp.Api).
2023-12-12 22:01:14.838 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Ask], [c].[Bid], [c].[Code], [c].[CratedBy], [c].[CreatedTime], [c].[CurrencyName], [c].[DeletedBy], [c].[DeletedTime], [c].[IsDeleted], [c].[ModifiedBy], [c].[ModifiedTime], [c].[TradingDate]
FROM [Currencies] AS [c]
WHERE [c].[Id] = @__id_0
2023-12-12 22:01:16.074 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ActualMoneyChf], [a].[ActualMoneyEur], [a].[ActualMoneyGbp], [a].[ActualMoneyPln], [a].[ActualMoneyUsd], [a].[CratedBy], [a].[CreatedTime], [a].[DeletedBy], [a].[DeletedTime], [a].[IsDeleted], [a].[ModifiedBy], [a].[ModifiedTime], [a].[UserIdentityId]
FROM [AccountData] AS [a]
WHERE [a].[UserIdentityId] = @__userId_0
2023-12-12 22:01:24.633 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (DbType = Guid), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Guid), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Guid), @p11='?' (DbType = Guid), @p12='?' (DbType = DateTime2), @p13='?' (Size = 500), @p14='?' (DbType = Guid), @p15='?' (DbType = Boolean), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime2), @p18='?' (Precision = 15) (Scale = 2) (DbType = Decimal), @p19='?' (Size = 50), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AccountData] SET [ActualMoneyChf] = @p0, [ModifiedBy] = @p1, [ModifiedTime] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([Id], [CategoryId], [CratedBy], [CreatedTime], [CurrencyId], [Date], [DefaultTransactionId], [DeletedBy], [DeletedTime], [Description], [GroupId], [IsDeleted], [ModifiedBy], [ModifiedTime], [Price], [Title], [UserIdentityId])
OUTPUT INSERTED.[IsDefault]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2023-12-12 22:01:24.639 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'WalletApp.Persistance.WalletDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_DefaultTransactions_DefaultTransactionId". The conflict occurred in database "WalletApp", table "dbo.DefaultTransactions", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4500ad3d-f5e4-4d33-a16b-d16e3dd290e4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_DefaultTransactions_DefaultTransactionId". The conflict occurred in database "WalletApp", table "dbo.DefaultTransactions", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4500ad3d-f5e4-4d33-a16b-d16e3dd290e4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-12-12 22:01:24.837 +01:00 [INF] Executed action WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api) in 26061.7911ms
2023-12-12 22:01:24.839 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.TransactionUserController.AddUserTransaction (WalletApp.Api)'
2023-12-12 22:01:24.996 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_DefaultTransactions_DefaultTransactionId". The conflict occurred in database "WalletApp", table "dbo.DefaultTransactions", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4500ad3d-f5e4-4d33-a16b-d16e3dd290e4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WalletApp.Persistance.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Persistence\UnitOfWork.cs:line 16
   at WalletApp.Application.Common.Transaction.AddUserTransaction.AddUserTransactionCommandHandler.Handle(AddUserTransactionCommand request, CancellationToken cancellationToken) in C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Application\Common\Transaction\AddUserTransaction\AddUserTransactionCommandHandler.cs:line 98
   at WalletApp.Application.Behaviours.ValidationBehaviour`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Application\Behaviours\ValidationBehaviour.cs:line 37
   at WalletApp.Controllers.TransactionUserController.AddUserTransaction(AddUserTransactionCommandDto dto, CancellationToken cancellationToken) in C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api\Controllers\TransactionUserController.cs:line 45
   at lambda_method537(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at WalletApp.Middleware.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult) in C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api\Middleware\AuthorizationMiddlewareResultHandler.cs:line 39
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at WalletApp.Middleware.ValidationErrorsMiddleware.InvokeAsync(HttpContext context) in C:\Users\maste\source\repos\wallet-app\wallet-app-backend\WalletApp.Api\Middleware\ValidationErrorsMiddleware.cs:line 19
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-12-12 22:01:25.008 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5238/api/transactionUser/add application/json 208 - 500 - text/plain;+charset=utf-8 26236.2008ms
2023-12-12 22:04:11.514 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/currency - -
2023-12-12 22:04:11.514 +01:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5238/api/category/userCategories - -
2023-12-12 22:04:11.521 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:04:11.522 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:04:11.522 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/currency - - - 204 - - 8.8749ms
2023-12-12 22:04:11.526 +01:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5238/api/category/userCategories - - - 204 - - 12.6747ms
2023-12-12 22:04:11.526 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/currency - -
2023-12-12 22:04:11.533 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5238/api/category/userCategories - -
2023-12-12 22:04:11.536 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:04:11.537 +01:00 [INF] CORS policy execution successful.
2023-12-12 22:04:11.538 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api)'
2023-12-12 22:04:11.538 +01:00 [INF] Executing endpoint 'WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api)'
2023-12-12 22:04:11.539 +01:00 [INF] Route matched with {action = "GetCurrencies", controller = "Currency"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult`1[System.Collections.Generic.IEnumerable`1[WalletApp.Application.Common.Currency.GetCurrencies.GetCurrenciesQueryResponseDto]]]] GetCurrencies(System.Threading.CancellationToken) on controller WalletApp.Controllers.CurrencyController (WalletApp.Api).
2023-12-12 22:04:11.540 +01:00 [INF] Route matched with {action = "GetUserCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[WalletApp.Application.Common.ApiResult`1[System.Collections.Generic.IEnumerable`1[WalletApp.Application.Common.Category.GetUserCategories.GetUserCategoriesResponseDto]]]] GetUserCategories(System.Threading.CancellationToken) on controller WalletApp.Controllers.CategoryController (WalletApp.Api).
2023-12-12 22:04:11.544 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Ask], [c].[Bid], [c].[Code], [c].[CratedBy], [c].[CreatedTime], [c].[CurrencyName], [c].[DeletedBy], [c].[DeletedTime], [c].[IsDeleted], [c].[ModifiedBy], [c].[ModifiedTime], [c].[TradingDate]
FROM [Currencies] AS [c]
2023-12-12 22:04:11.546 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CratedBy], [c].[CreatedTime], [c].[DeletedBy], [c].[DeletedTime], [c].[GroupId], [c].[IsDeleted], [c].[ModifiedBy], [c].[ModifiedTime], [c].[Name], [c].[UserIdentityId]
FROM [Categories] AS [c]
WHERE [c].[UserIdentityId] = @__id_0 AND [c].[IsDeleted] = CAST(0 AS bit)
2023-12-12 22:04:11.546 +01:00 [INF] Executing OkObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult`1[[System.Collections.Generic.IEnumerable`1[[WalletApp.Application.Common.Currency.GetCurrencies.GetCurrenciesQueryResponseDto, WalletApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-12-12 22:04:11.548 +01:00 [INF] Executing OkObjectResult, writing value of type 'WalletApp.Application.Common.ApiResult`1[[System.Collections.Generic.IEnumerable`1[[WalletApp.Application.Common.Category.GetUserCategories.GetUserCategoriesResponseDto, WalletApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-12-12 22:04:11.549 +01:00 [INF] Executed action WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api) in 8.5204ms
2023-12-12 22:04:11.550 +01:00 [INF] Executed action WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api) in 7.8936ms
2023-12-12 22:04:11.551 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.CurrencyController.GetCurrencies (WalletApp.Api)'
2023-12-12 22:04:11.552 +01:00 [INF] Executed endpoint 'WalletApp.Controllers.CategoryController.GetUserCategories (WalletApp.Api)'
2023-12-12 22:04:11.553 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/currency - - - 200 - application/json;+charset=utf-8 26.9749ms
2023-12-12 22:04:11.554 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5238/api/category/userCategories - - - 200 - application/json;+charset=utf-8 21.3896ms
